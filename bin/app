#!/usr/bin/env ruby

$LOAD_PATH.unshift File.join(File.dirname(__FILE__), '..', 'lib')

require 'console'
require 'ui'

require 'reader'
require 'writer'
require 'db'

require 'lister'
require 'creator'
require 'finder'

require 'menu'
require 'conman'

ui   = UI.new(Console.new($stdin, $stdout))
db   = DB.new(Reader.new, Writer.new)

actions = [
  ["List contacts",   Lister.new( ui, db)],
  ["Add contacts",    Creator.new(ui, db)],
  ["Search contacts", Finder.new( ui, db)],
  ["Exit",            nil]
]

menu   = Menu.new(ui, actions)
conman = Conman.new(menu)
conman.run